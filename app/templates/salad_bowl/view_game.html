{% extends "salad_bowl/base.html" %}

{% block salad_bowl_content %}
    <div class="pt-3">
    	<div class="row">
    		<div class="col">

		        <h3>{{ game.name }}</h3>
		    </div>
		    {% if g.current_player.id == game.owner_player_id %}
			    <div class="col">
			    	<a class="btn btn-primary float-right" data-modal-url="{{ url_for('salad_bowl.start_game', game_id=game.id) }}" href="#"> 
			            Start Game
			        </a>
			    </div>
		    {% endif %}
		</div>

        {% if teams %}
        	<div class="pt-3 row no-gutters align-items-center mb-1">
	        	<div class="col col-auto h5 mb-0">Teams</div>
	        	<div class="col pl-1">
					<a class="btn btn-outline-dark border-0 btn-sm" data-modal-url="{{ url_for('salad_bowl.create_team', game_id=game.id) }}" href="#"  title="Create Team"> 
			            <i class="fa fa-plus"></i>
			        </a>
		        </div>
	        </div>
	        <table class="table">
	          <thead>
	            <tr>
	              <th scope="col">Name</th>
	              <th scope="col">Players</th>
	              <th scope="col"></th>
	            </tr>
	          </thead>
	          <tbody>
	            {% for team in teams %}
	                <tr>
	                  <td class="align-middle">{{ team.name }}</td>
	                  <td class="align-middle">
	                  		{% if team.players %}
		                  		{{ team.players |map(attribute='name') |join(', ') }}
	                  		{% else %}
	                  			-
	                  		{% endif %}
	                  </td>
	                  <td class="align-middle">
	                  	{% if team.id == current_team.id %}
  		                    <a class="btn btn-primary float-right btn-sm" href="#" data-modal-url="{{ url_for('salad_bowl.leave_team', game_id=game.id, team_id=team.id) }}"> 
		                        Leave
		                    </a>
		                {% elif not current_team %}
		                	<a class="btn btn-primary float-right btn-sm" href="#" data-modal-url="{{ url_for('salad_bowl.join_team', game_id=game.id, team_id=team.id) }}"> 
		                        Join
		                    </a>
	                  	{% endif %}
	                  </td>
	                </tr>
	            {% endfor %}
	          </tbody>
	        </table>
		{% else %}
			<div class="pt-3 text-center">
				There are currently no teams registered for this game, you should create one!
				<div class="pt-2">
			        <a class="btn btn-primary" data-modal-url="{{ url_for('salad_bowl.create_team', game_id=game.id) }}" href="#"> 
			            Create Team
			        </a>
		        </div>
	        </div>
	    {% endif %}

    </div>
{% endblock %}
